version: '3.7'

services:

 users:
   build:
     context: ./services/users
     dockerfile: Dockerfile-dev
   volumes:
     - './services/users:/usr/src/app'
   ports:
     - 5001:7000
   environment:
     - FLASK_APP=project/__init__.py
     - FLASK_ENV=development
     - APP_SETTINGS=project.config.DevelopmentConfig
     - DATABASE_URL=postgres://postgres@users-db:5432/users_dev
     - DATABASE_TEST_URL=postgres://postgres@users-db:5432/users_test


 hola:
   build:
     context: ./services/hola
     dockerfile: Dockerfile-dev
   volumes:
     - './services/hola:/usr/src/app'
   ports:
     - 6001:7000
   environment:
     - FLASK_APP=project/__init__.py
     - FLASK_ENV=development
     - APP_SETTINGS=project.config.DevelopmentConfig


 users-bd:
   build:
     context: ./services/users/project/db
     dockerfile: Dockerfile-dev
   ports:
     - 5435:5432
   environment:
     - POSTGRES_USERS=postgres
     - POSTGRES_PASSWORD=postgres
     

 